SchemaVersion: 2018-07-01
Owner: "@mongodb/product-perf"
Description: >
  This is a simple test that runs ping command on MongoDB to meassure the latency of command dispatch.

Clients:
  Default:
    QueryOptions:
      maxPoolSize: 500

Actors:
- Name: LowThreadsPingRateLimited
  Type: RunCommand
  Threads: 2
  Phases:
  - Duration: 30 seconds
    GlobalRate: 100 per 1 second
    Database: admin
    Operations:
      - OperationName: RunCommand
        OperationIsQuiet: true
        OperationCommand:
          ping: 1
  - {Nop: true}

- Name: HighThreadsPingRateLimited
  Type: RunCommand
  Threads: 64
  Phases:
  - {Nop: true}
  - Duration: 30 seconds
    GlobalRate: 1000 per 1 second
    Database: admin
    Operations:
      - OperationName: RunCommand
        OperationIsQuiet: true
        OperationCommand:
          ping: 1

AutoRun:
- When:
    mongodb_setup:
      $eq: standalone